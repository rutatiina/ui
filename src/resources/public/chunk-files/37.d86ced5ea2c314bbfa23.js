(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{o4Ba:function(t,e,a){"use strict";a.r(e);var l=a("o0o1"),i=a.n(l);function s(t,e,a,l,i,s,n){try{var o=t[s](n),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(l,i)}function n(t){return function(){var e=this,a=arguments;return new Promise((function(l,i){var n=t.apply(e,a);function o(t){s(n,l,i,o,c,"next",t)}function c(t){s(n,l,i,o,c,"throw",t)}o(void 0)}))}}var o={data:function(){return{pageTitle:"Bank Account",urlPost:"/banking/accounts",uploadFile:!0,mapFields:!1,attributes:{encoding:"UTF-8 (Unicode)",id:this.$route.params.id},encoding:[{value:"UTF-8 (Unicode)",text:"UTF-8 (Unicode)"}],statement:{},fileMapping:{statement_id:null,mapping:{effect_column:"",date_column:null,date_format:"yyyy-MM-dd",description_column:null,contact_column:null,reference_column:null,credit_column:null,credit_format:".|",debit_column:null,debit_format:".|"}},dateFormat:[{value:"yyyy/MM/dd",text:"yyyy/MM/dd"},{value:"dd.MM.yy",text:"dd.MM.yy"},{value:"MM/dd/yyyy",text:"MM/dd/yyyy"},{value:"dd.MM.yyyy",text:"dd.MM.yyyy"},{value:"MM.dd.yy",text:"MM.dd.yy"},{value:"MM-dd-yyyy",text:"MM-dd-yyyy"},{value:"yyyy.MM.dd",text:"yyyy.MM.dd"},{value:"dd/MM/yyyy",text:"dd/MM/yyyy"},{value:"MM.dd.yyyy",text:"MM.dd.yyyy"},{value:"dd-MM-yyyy",text:"dd-MM-yyyy"},{value:"dd/MM/yy",text:"dd/MM/yy"},{value:"yyyy-MM-dd",text:"yyyy-MM-dd"},{value:"MM/dd/yy",text:"MM/dd/yy"},{value:"yy.MM.dd",text:"yy.MM.dd"}],numberFormat:[{value:".|",text:"1234567.89"},{value:".|-",text:"-1234567.89"},{value:".|()",text:"(1234567.89)"},{value:".|",text:"1,234,567.89"},{value:".|-",text:"-1,234,567.89"},{value:".|()",text:"(1,234,567.89)"},{value:".|",text:"1 234 567.89"},{value:".|-",text:"-1 234 567.89"},{value:".|()",text:"(1 234 567.89)"},{value:",|",text:"1234567,89"},{value:",|-",text:"-1234567,89"},{value:",|()",text:"(1234567,89)"},{value:",|",text:"1.234.567,89"},{value:",|-",text:"-1.234.567,89"},{value:",|()",text:"(1.234.567,89)"},{value:",|",text:"1 234 567,89"},{value:",|-",text:"-1 234 567,89"},{value:",|()",text:"(1 234 567,89)"}],fileColumns:[{value:"Date",text:"Date"},{value:"Withdrawals",text:"Withdrawals"},{value:"Deposits",text:"Deposits"},{value:"Payee",text:"Payee"},{value:"Description",text:"Description"},{value:"Reference Number",text:"Reference Number"}]}},mounted:function(){this.$root.appFetchGlobalsCurrencies()},watch:{},methods:{fetchAttributes:function(){var t=this;return n(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get(t.$route.fullPath).then((function(t){})).catch((function(t){console.log(t)})).finally((function(t){}));case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},fetchBanks:function(t){var e=this;return n(i.a.mark((function a(){var l;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return",!1);case 2:return l={search:[{column:"name",value:t="-initiate-"===t?"":t}]},a.prev=4,a.next=7,axios.post("/banking/banks/search",l).then((function(t){e.banks=t.data.data})).catch((function(t){console.log(t)})).finally((function(t){}));case 7:return a.abrupt("return",a.sent);case 10:a.prev=10,a.t0=a.catch(4),console.log(a.t0);case 13:case"end":return a.stop()}}),a,null,[[4,10]])})))()},formUploadFile:function(t){var e=this;t.preventDefault();var a=new FormData;a.append("file",this.$refs.filesAttached.files[0]),a.append("id",this.attributes.id),a.append("encoding",this.attributes.encoding),PNotify.removeAll();var l=this.$root.PNotifySettings,i=new PNotify(l);axios.post("/banking/accounts/transactions/import",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){l.text=t.data.messages.join("\n"),!0===t.data.status?(l.title="Success",l.type="success",l.addclass="bg-success-400 border-success-400",e.uploadFile=!1,e.mapFields=!0,e.fileColumns=t.data.file_columns,e.fileMapping.statement_id=t.data.statement.id,e.statement=t.data.statement):(l.title="! Error",l.type="error",l.addclass="bg-warning-400 border-warning-400"),i.update(l),i.get().click((function(){i.remove()}))}))},formMapFile:function(t){var e=this;t.preventDefault(),PNotify.removeAll();var a=this.$root.PNotifySettings,l=new PNotify(a);axios.post("/banking/accounts/transactions/map-fields",this.fileMapping).then((function(t){a.text=t.data.messages.join("\n"),!0===t.data.status?(a.title="Success",a.type="success",a.addclass="bg-success-400 border-success-400",e.$router.push({path:"/banking/accounts/"+e.$route.params.id})):(a.title="! Error",a.type="error",a.addclass="bg-warning-400 border-warning-400"),l.update(a),l.get().click((function(){l.remove()}))}))}}},c=a("KHd+"),r=Object(c.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"page-header page-header-light"},[t._m(0),t._v(" "),a("div",{staticClass:"breadcrumb-line breadcrumb-line-light header-elements-md-inline"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"breadcrumb"},[a("a",{staticClass:"breadcrumb-item",attrs:{href:"/"}},[a("i",{staticClass:"icon-home2 mr-2"}),t._v(" "),a("span",{staticClass:"badge badge-primary font-weight-bold rg-breadcrumb-item-tenant-name"},[t._v(" "+t._s(t._f("truncate")(this.$root.tenant.name,30))+" ")])]),t._v(" "),a("span",{staticClass:"breadcrumb-item"},[t._v("Banking")]),t._v(" "),a("span",{staticClass:"breadcrumb-item"},[t._v("Accounts")]),t._v(" "),a("span",{staticClass:"breadcrumb-item active"},[t._v("Create")])]),t._v(" "),t._m(1)]),t._v(" "),t._m(2)]),t._v(" "),a("div",{staticClass:"header-elements"},[a("div",{staticClass:"breadcrumb justify-content-center"},[a("router-link",{staticClass:" btn btn-danger btn-sm rounded-round font-weight-bold",attrs:{to:"/banking"}},[a("i",{staticClass:"icon-library2 mr-1"}),t._v("\n                        Bank Accounts\n                    ")])],1)])])]),t._v(" "),a("div",{staticClass:"content border-0 padding-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[t.uploadFile&&!this.$root.loading?a("div",{staticClass:"card shadow-none rounded-0 border-0"},[a("div",{staticClass:"card-body p-0"},[a("loading-animation"),t._v(" "),a("form",{attrs:{action:"/banking/accounts/transactions/map-fields",method:"post",enctype:"multipart/form-data",autocomplete:"off"},on:{submit:t.formUploadFile}},[a("input",{staticClass:"d-none",attrs:{type:"file",name:"file",value:"",id:"file_to_import"}}),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-lg-2"},[t._v("Choose files to upload")]),t._v(" "),a("div",{staticClass:"col-lg-10"},[a("input",{ref:"filesAttached",staticClass:"form-control border-0 p-1 h-auto",attrs:{type:"file"}}),t._v(" "),t._m(3)])]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-form-label col-md-2"},[t._v("Character Encoding")]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("model-list-select",{staticClass:"form-control",attrs:{list:t.encoding,"option-value":"value","option-text":"text",placeholder:"Select encoding"},model:{value:t.attributes.encoding,callback:function(e){t.$set(t.attributes,"encoding",e)},expression:"attributes.encoding"}})],1)]),t._v(" "),t._m(4)])],1)]):t._e(),t._v(" "),t.mapFields?a("div",{staticClass:"card shadow-none rounded-0 border-0"},[a("div",{staticClass:"card-body p-0"},[a("loading-animation"),t._v(" "),a("form",{attrs:{action:"/banking/accounts/transactions/map-fields",method:"post",enctype:"multipart/form-data",autocomplete:"off"},on:{submit:t.formMapFile}},[a("p",[t._v("File name: "),a("code",[t._v(t._s(t.statement.file_name))])]),t._v(" "),a("p",[t._v("The auto selected matches by the system are;")]),t._v(" "),t._m(5),t._v(" "),a("div",{staticClass:"form-group row",attrs:{title:"Transaction effect column i.e. column showing if record is a debit or credit"}},[a("label",{staticClass:"col-lg-3 col-form-label"},[t._v("Transaction Effect column:")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("model-list-select",{attrs:{list:t.fileColumns,"option-value":"value","option-text":"text",placeholder:"Select encoding"},model:{value:t.fileMapping.mapping.effect_column,callback:function(e){t.$set(t.fileMapping.mapping,"effect_column",e)},expression:"fileMapping.mapping.effect_column"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-form-label"},[t._v("Date:")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("model-list-select",{attrs:{list:t.fileColumns,"option-value":"value","option-text":"text",placeholder:"Select encoding"},model:{value:t.fileMapping.mapping.date_column,callback:function(e){t.$set(t.fileMapping.mapping,"date_column",e)},expression:"fileMapping.mapping.date_column"}})],1),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("model-list-select",{attrs:{list:t.dateFormat,"option-value":"value","option-text":"text",placeholder:"Select date format"},model:{value:t.fileMapping.mapping.date_format,callback:function(e){t.$set(t.fileMapping.mapping,"date_format",e)},expression:"fileMapping.mapping.date_format"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-form-label"},[t._v("Description:")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("model-list-select",{attrs:{list:t.fileColumns,"option-value":"value","option-text":"text",placeholder:"Select encoding"},model:{value:t.fileMapping.mapping.description_column,callback:function(e){t.$set(t.fileMapping.mapping,"description_column",e)},expression:"fileMapping.mapping.description_column"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-form-label"},[t._v("Payee:")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("model-list-select",{attrs:{list:t.fileColumns,"option-value":"value","option-text":"text",placeholder:"Select encoding"},model:{value:t.fileMapping.mapping.contact_column,callback:function(e){t.$set(t.fileMapping.mapping,"contact_column",e)},expression:"fileMapping.mapping.contact_column"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-form-label"},[t._v("Reference Number:")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("model-list-select",{attrs:{list:t.fileColumns,"option-value":"value","option-text":"text",placeholder:"Select encoding"},model:{value:t.fileMapping.mapping.reference_column,callback:function(e){t.$set(t.fileMapping.mapping,"reference_column",e)},expression:"fileMapping.mapping.reference_column"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-form-label"},[t._v("Withdraws / Credit:")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("model-list-select",{attrs:{list:t.fileColumns,"option-value":"value","option-text":"text",placeholder:"Select encoding"},model:{value:t.fileMapping.mapping.credit_column,callback:function(e){t.$set(t.fileMapping.mapping,"credit_column",e)},expression:"fileMapping.mapping.credit_column"}})],1),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("model-list-select",{attrs:{list:t.numberFormat,"option-value":"value","option-text":"text",placeholder:"Select credit format"},model:{value:t.fileMapping.mapping.credit_format,callback:function(e){t.$set(t.fileMapping.mapping,"credit_format",e)},expression:"fileMapping.mapping.credit_format"}})],1)]),t._v(" "),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-form-label"},[t._v("Deposit / Debit:")]),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("model-list-select",{attrs:{list:t.fileColumns,"option-value":"value","option-text":"text",placeholder:"Select encoding"},model:{value:t.fileMapping.mapping.debit_column,callback:function(e){t.$set(t.fileMapping.mapping,"debit_column",e)},expression:"fileMapping.mapping.debit_column"}})],1),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("model-list-select",{attrs:{list:t.numberFormat,"option-value":"value","option-text":"text",placeholder:"Select debit format"},model:{value:t.fileMapping.mapping.debit_format,callback:function(e){t.$set(t.fileMapping.mapping,"debit_format",e)},expression:"fileMapping.mapping.debit_format"}})],1)]),t._v(" "),t._m(6)])],1)]):t._e()]),t._v(" "),t._m(7)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"page-header-content header-elements-md-inline"},[e("div",{staticClass:"page-title d-flex"},[e("h4",[e("i",{staticClass:"icon-file-upload mr-2"}),this._v("\n                    Upload Statement - Select File\n                ")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"header-elements-toggle text-default d-md-none",attrs:{href:"#"}},[e("i",{staticClass:"icon-more"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"header-elements-toggle text-default d-md-none",attrs:{href:"#"}},[e("i",{staticClass:"icon-more"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-muted pl-1"},[e("small",[this._v("File format: CSV or TSV or OFX or QIF or CAMT.053")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-form-label col-lg-2"}),this._v(" "),e("div",{staticClass:"col-lg-10"},[e("button",{staticClass:"btn btn-danger btn-labeled btn-labeled-left font-weight-bold",attrs:{type:"submit"}},[e("b",[e("i",{staticClass:"icon-chevron-right"})]),this._v(" Upload file & Continue")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group row"},[e("div",{staticClass:"col-lg-3 text-muted"},[this._v("System fields:")]),this._v(" "),e("div",{staticClass:"col-lg-4 text-muted"},[this._v("Imported field headers")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-lg-3 col-form-label"}),this._v(" "),e("div",{staticClass:"col-lg-7"},[e("button",{staticClass:"btn btn-danger btn-labeled btn-labeled-left font-weight-bold",attrs:{type:"submit"}},[e("b",[e("i",{staticClass:"icon-chevron-right"})]),this._v(" Map fields and continue\n                                    ")]),this._v(" "),e("a",{staticClass:"btn btn-light btn-labeled btn-labeled-left font-weight-bold ml-4",attrs:{href:"/banking/transactions/file/cancel/"}},[e("b",[e("i",{staticClass:"icon-cancel-circle2"})]),this._v(" Cancel\n                                    ")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"card shadow-none rounded-0 border-0"},[a("div",{staticClass:"card-body p-0"},[a("div",{staticClass:"import-help"},[a("h5",{staticClass:"pl-3"},[t._v("Tip / Help")]),t._v(" "),a("ul",[a("li",[t._v("Download a "),a("a",{attrs:{href:"/import_templates/sample_bankstatement.xlsx"}},[t._v("sample file")]),t._v(" and compare it to your import file to ensure you have the file perfect for the import.")]),t._v(" "),a("li",[t._v("If you have files in other formats, please convert it to an accepted file format.")]),t._v(" "),a("li",[t._v("You can configure your import settings and save them for future too!")])])])])])])}],!1,null,null,null);e.default=r.exports}}]);